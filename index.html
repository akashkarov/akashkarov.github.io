<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9, user-scalable=no">
        <title>Угадайка</title>
    </head>
    <script type="text/javascript">
        var congrats = ["Котик - молодец!",
                        "Ты умница!",
                        "Супер-пупер!",
                        "Поздравляю от души!"];
        var words = ["время","место","жизнь","слово","часть","число","конец","образ","город","связь","центр","право","месяц","форма","закон","земля","точка","смысл","рубль","ответ","рынок","глава","совет","народ","улица","автор","семья","война","школа","орган","объем","район","книга","повод","успех","вечер","мысль","рамка","наука","выход","голос","целое","выбор","метод","фирма","среда","номер","сфера","сумма","класс","линия","вывод","стена","масса","дверь","гость","режим","поиск","пункт","герой","завод","лидер","прием","текст","норма","кровь","сотня","адрес","схема","армия","отдел","слава","стиль","осень","весна","поток","плечо","доход","товар","театр","огонь","акция","палец","черта","фильм","смена","сцена","песня","запад","цифра","сосед","берег","страх","спина","честь","рубеж","волна","эпоха","ветер","серия","роман","запас","сутки","карта","фраза","набор","налог","отказ","заказ","сезон","тайна","кухня","пакет","крыша","округ","слеза","канал","отдых","волос","грудь","обмен","музей","спрос","мечта","труба","кусок","нужда","плата","дождь","птица","толпа","запах","мужик","билет","длина","масло","штука","жилье","строй","трава","порог","почва","шутка","отчет","покой","марка","буква","экран","тепло","поезд","добро","спорт","водка","вклад","сюжет","вызов","стихи","крыло","ущерб","полет","актер","визит","фронт","благо","север","доска","нефть","мотив","дурак","ручка","взрыв","немец","треть","склад","судья","крест","грязь","радио","ткань","стать","замок","метро","облик","песок","тонна","хвост","мороз","живот","холод","капля","дочка","банка","кулак","удача","пятно","кость","грань","мешок","океан","тоска","нация","горло","исход","обида","салон","танец","атака","почта","смесь","идеал","пожар","голод","игрок","звено","полка","охота","кошка","забор","пауза","мотор","вагон","зверь","озеро","диван","юноша","домик","опора","учеба","сумка","копия","сырье","рукав","элита","гений","сапог","общее","финал","тариф","шоссе","разум","пьеса","отряд","лента","поход","съезд","плита","орден","ствол","бытие","блеск","ветвь","блюдо","лодка","ветка","арест","штаны","намек","агент","белье","туман","маска","навык","ножка","устав","ложка","еврей","сахар","шапка","архив","отбор","столб","палка","башня","ведро","актив","опрос","сдача","порыв","князь","зерно","брюки","бровь","знамя","весть","вождь","ковер","обувь","свеча","пачка","юрист","тезис","морда","лампа","гонка","чашка","старт","битва","бомба","пламя","мусор","халат","уголь","недра","шофер","минус","собор","форум","обзор","сетка","опера","рычаг","кисть","драка","плоть","обман","ангел","штраф","посол","малыш","носок","ворот","шляпа","касса","суета","драма","идиот","тупик","химия","жажда","довод","фрукт","проза","лавка","грамм","пение","выезд","певец","отзыв","новое","русло","такси","тираж","шепот","проба","отель","шкура","дрова","залог","бабка","наряд","речка","ванна","гараж","жилец","сосна","букет","овощи","икона","струя","племя","тетка","нитка","склон","закат","вздох","сосуд","имидж","бочка","упрек","позор","мышца","борец","вдова","скала","злоба","топор","ружье","печка","исток","ребро","бремя","кузов","мышка","базар","фокус","кукла","петля","туфля","мерка","сталь","бедро","медик","судно","искра","горка","рюмка","испуг","вопль","затея","вирус","пушка","влага","белок","ягода","пирог","титул","показ","папка","шарик","стадо","казнь","жених","козел","рельс","заряд","пилот","девка","буфет","степь","сарай","вилка","бокал","фасад","арена","культ","слуга","гамма","погон","висок","глина","налет","почка","спирт","взлет","скука","побег","песнь","пласт","ручей","койка","треск","пафос","табак","череп","очерк","взнос","рывок","майор","стенд","сынок","сдвиг","трусы","котел","спуск","кубок","пятка","рыбка","залив","поэма","мэрия","чайка","порок","обряд","ссора","биржа","рыбак","дырка","гроза","моряк","пепел","досуг","казна","майка","тварь","купол","завет","сеанс","принц","ласка","месть","кумир","хохот","шкала","азарт","балет","пытка","парад","дрожь","салат","будни","петух","напор","грунт","тропа","пучок","нюанс","обход","крыса","аллея","штамп","пацан","оклад","свист","киоск","груда","штурм","монах","банда","проем","отрыв","будка","рояль","шахта","дрянь","особа","газон","нищий","въезд","кучка","обыск","шпион","физик","багаж","слюна","этика","полюс","шорох","белка","ферма","канон","почет","кража","глубь","скрип","обрыв","садик","афиша","купец","виски","повар","казак","бланк","чутье","конек","парус","манер","штора","канун","малое","башка","крона","чулок","девиз","алмаз","мадам","колея","гудок","сплав","комар","зачет","черед","пасть","кепка","пульс","недуг","ощупь","щетка","поляк","родня","стопа","лапка","талия","бетон","овраг","щенок","сквер","абзац","износ","синяк","скула","кишка","возня","ролик","лимон","брюхо","барак","тайга","взвод","венец","богач","вихрь","комок","палач","перец","парта","груша","шишка","тесто","приют","уклон","пульт","косяк","пасха","корка","ларек","вилла","чудак","диета","финиш","нутро","грант","квота","заход","трата","катер","вывоз","опека","уклад","обком","дебют","дилер","вылет","венок","камин","штрих","изгиб","видео","капот","насос","грипп","пресс","олень","руины","эскиз","миска","макет","червь","кубик","баран","салют","сокол","шрифт","дымок","пчела","губка","франк","толща","отход","балка","дуэль","нажим","гладь","глыба","седло","цыган","аванс","отбой","виток","помин","дымка","смола","магия","донос","жулик","шланг","вышка","веник","барон","наезд","навоз","крупа","страж","химик","устой","турок","бугор","выпад","факел","кофта","байка","навес","порох","фланг","хруст","вальс","лимит","резон","мафия","денек","особь","копье","свита","брань","подол","графа","ислам","отпор","вишня","взмах","канат","холст","дробь","клоун","масть","греза","акула","рифма","горох","метла","носик","выкуп","лоток","озноб","тракт","откос","чехол","отвод","кивок","рубка","ворох","сукно","банан","отсек","мытье","паста","тачка","шашка","эгида","завал","нотка","каток","броня","мираж","порча","счеты","демон","молот","разок","прядь","созыв","ловля","шприц","арбуз","питье","топот","талон","зенит","хобби","краса","изъян","щепка","корма","ничья","загар","каска","парик","накал","барин","ореол","обвал","ордер","говно","фанат","истец","узник","сабля","аборт","чрево","посев","манеж","шторм","окрик","кудри","штамм","сауна","охват","смута","трест","вахта","запой","бутик","рознь","смета","секта","кабак","ярлык","грива","улика","милая","ширма","бычок","шасси","весло","хутор","робот","кроха","флора","титан","лилия","житье","раунд","ворон","лопух","сотка","якорь","умник","жилка","днище","бренд","обрез","шайка","тиран","рация","чужак","комод","фишка","пират","пешка","глушь","ссуда","шейка","гайка","кочка","устье","отлив","сенат","булка","молва","древо","бухта","аллах","мятеж","вожак","рожок","торец","сыщик","лапша","часик","вычет","тесть","валун","слива","донор","чугун","мания","томик","кефир","досье","сучок","пинок","врата","берет","спазм","жилет","линза","мячик","выдох","запор","самец","казус","хмель","хвала","мойка","отток","каюта","баржа","пудра","изыск","смотр","шпага","сосок","убыль","оплот","блоха","заезд","тенор","лямка","житие","мачта","атлас","кабан","шитье","столп","самка","дебри","перст","зазор","плеть","шорты","вынос","тезка","ножик","тонус","догма","шквал","иудей","уксус","рубин","тахта","батон","шпана","сушка","рента","вздор","ломка","гряда","потоп","набег","шлейф","отлет","альфа","тембр","говор","лицей","рулон","камыш","жесть","угода","фасон","кредо","спица","лавра","санки","курок","делец","изгой","пашня","лихва","полис","челка","алкаш","рвота","немка","лунка","детка","ладан","матка","метка","шпала","бисер","осина","полог","траур","басня","задор","конус","блядь","шлюха","мушка","шалаш","плеск","пенек","будда","фигня","вираж","оазис","фауна","декан","обруч","калий","зелье","брэнд","ересь","годик","побои","яичко","сброс","циник","вырез","бойня","шпиль","телец","чешуя","норка","щечка","сопли","тыква","лакей","шатер","лепта","пятая","рубец","брешь","бачок","тулуп","замер","мумия","транс","шажок","остов","бочок","загон","осада","танго","декор","синод","чужое","наказ","сироп","келья","ладья","копна","лесть","стужа","акциз","стезя","афера","трель","буфер","тумба","укроп","сапер","опись","этнос","топка","каста","десна","адепт","полив","засов","мазут","отвар","отвал","ртуть","пятак","тюбик","понос","аудит","белый","кадка","узбек","шубка","снедь","астма","геном","ляжка","запал","давка","табло","гниль","дележ","рупор","томат","тазик","короб","помет","локон","смерч","эмаль","почин","мазок","пивко","коран","тиски","леший","тяжба","отчим","колос","пупок","вожжа","валик","главк","базис","амбар","совок","орава","часок","аршин","жучок","кураж","откат","гольф","откуп","вояка","отрок","яство","забой","падла","пяток","ропот","ликер","дрема","марля","горец","мамка","сопка","сопля","нахал","тапка","чулан","рокот","фотка","дудка","фужер","варяг","лепет","клерк","задел","козни","жердь","пикет","пекло","эстет","дебил","щелка","гонец","скоба","шайба","плаха","кадык","лесок","кулек","лазер","обуза","скарб","удаль","лотос","попка","прыть","слюни","дубль","думец","бутон","чурка","излом","утеха","турне","такса","пойма","гомон","наган","пурга","бронь","гетто","знать","маляр","опция","балда","клише","индус","чернь","оковы","занос","труха","зажим","посох","латыш","бидон","лиана","седан","ареал","гарем","родич","уступ","фюрер","атлет","дамба","вьюга","астра","побор","ножны","табун","склеп","помои","щиток","галка","булат","буран","ходок","паром","шмель","опала","прима","зубок","шельф","слизь","пушок","желчь","талиб","пайка","накат","мразь","венгр","ангар","чувак","телка","посад","казах","кореш","кювет","леска","свора","галоп","фляга","шакал","блажь","оскал","колба","обгон","вокал","падеж","газик","напев","шабаш","сучка","отшиб","помпа","хобот","хлыст","пицца","оргия","литье","резец","лучик","кулик","хворь","гусар","хомут","завуч","лобби","посыл","затор","штиль","ловец","дупло","фикус","флюид","сленг","порез","типаж","панно","жакет","дозор","вихор","таран","лирик",
            "кучер","кокон","окунь","битье","рожон","мочка","флирт","шаман","варка","трико","дятел","иврит","гнида","канва","кожух","гвалт","мирок","хохол","азиат","кобра","табор","навар","смрад","чукча","котик","бегун","жираф","круиз","быдло","дужка","космы","бубен","вотум","плато","профи","хиппи","комик","френч","зубец","тягач","какао","рэкет","покои","пижон","рампа","оксид","жетон","ранка","резня","тычок","фугас","ситец","мошка","малец","мудак","моток","душок","конюх","лишек","сброд","кузен","радар","сачок","зебра","ботва","валет","фраер","бляха","тушка","потек","умолк","опиум","бирка","псина","вобла","пенка","холоп","сбруя","кукиш","щипцы","сонет","тучка","плешь","левша","муфта","филин","шумок","вязка","бонус","калач","ферзь","спесь","купон","винцо","силок","жерло","лейбл","позыв","олово","качка","годок","излет","былое","свара","нарыв","скотч","ротор","угорь","уазик","вуаль","медиа","загул","ясень","пойло","ампир","лепка","бордо","замах","месса","кочан","нимфа","кросс","ступа","седок","отгул","ольха","малек","осока","алиби","гамак","шпора","огрех","одурь","бурка","агнец","холуй","хохма","четки","жабра","чалма","авеню","бурда","желоб","грыжа","омега","тюфяк","кадет","масон","джинн","фурор","пенал","чипсы","надел","рейка","муляж","полоз","терем","лайка","аскет","сырок","пшено","семга","круча","анонс","жатва","мерин","финка","забег","дачка","створ","взлом","завоз","драйв","ротик","холка","сотая","длань","кирка","кайма","посул","ранец","интим","порка","верфь","боров","бобер","румын","судак","ослик","гонор","нытье","торба","кольт","карат","чтиво","егерь","тренд","метан","слайд","транш","пепси","карма","цапля","аркан","ханжа","ледок","ингуш","босяк","штырь","сущее","лыжня","зарок","пошив","кашка","пихта","болид","покос","минор","ларец","соска","облом","месье","туфта","кляча","тщета","барыш","ночка","дзюдо","терка","блуза","дрейф","вывих","навет","квант","лейка","попса","юниор","пьянь","вольт","резка","силач","дрозд","жирок","волок","парча","саван","сюита","трюмо","содом","пряжа","телок","замша","кисет","ягуар","логос","шуруп","зевок","шулер","отрог","извив","набат","шифер","индюк","катар","осыпь","читка","пахан","манна","гогот","гелий","аврал","песик","брага","ватка","донна","малый","ралли","омлет","ребус","отлов","чарка","ровня","тоник","сошка","рокер","фобия","брошь","отрез","окрас","падло","модем","шурин","осетр","рытье","пакля","ретро","лужок","морок","рыжик","бугай","покер","хакер","невод","клещи","извоз","франт","амбал","ряска","домен","юнкер","жрица","лубок","софит","собес","палас","волхв","киска","самбо","заика","спора","бекон","окись","гриль","ямщик","кварц","щебет","эллин","клюка","кулич","манто","мулла","верба","живой","хорек","дебош","абрис","иерей","фавор","багор","ленца","мажор","судия","удила","милок","пенье","телик","русак","халва","рысак","фазан","колер","рядок","фетиш","бобби","обжиг","розга","сноха","вафля","пикап","жисть","птаха","вылов","норов","обвод","утеря","жулье","лобик","сурок","вирши","мазня","шериф","рафик","трояк","денди","танка","хмырь","отжиг","стриж","капут","мелок","херня","зомби","шалун","оброк","загиб","офшор","треба","отара","пошиб","утиль","искус","божок","втора","ивняк","песец","гашиш","порно","сопло","бронх","цинга","тумак","решка","кумач","пуфик","дрель","свояк","аббат","дышло","зачин","липка","стояк","икота","оклик","стела","бобик","донец","факир","зайка","отъем","хлябь","бридж","ранчо","сглаз","аорта","упырь","пиала","кушак","уздцы","шкода","дылда","лишай","фуфло","клика","колье","надой","телек","купля","мизер","патлы","рвань","амвон","душка","курва","гидра","чудик","голыш","ездок","кутеж","левак","лежка","отсев","шухер","кладь","лихач","пилка","выпас","карел","хитон","помол","просо","сидор","гиена","глист","шатун","плеер","репка","бадья","питие","дубок","выгон","гуашь","флокс","ариец","вазон","отпад","липид","редис","шхуна","мурка","торос","капли","амеба","финик","логик","ходка","анаша","лежак","пидор","хомяк","клеть","евнух","лютик","литер","бонза","полон","мысок","спрут","кагор","маржа","силос","налим","эркер","щегол","диско","зарез","корча","кашне","чабан","манго","лобок","кулон","велик","краля","шваль","бурун","инжир","кисея","слюда","кокос","питон","твист","хорей","шахид","бизон","затон","писец","замес","прель","удерж","общак","турка","карга","тромб","чечен","унтер","медяк","заумь","фурия","чуваш","качок","шавка","жупел","гумно","ухват","чужой","галун","злато","цацка","вакса","мопед","юрфак","жучка","фенол","пышка","хатка","топик","мидия","фотон","враки","пария","басок","лаваш","тулья","чепец","ломик","тесак","шнапс","мякиш","парок","балык","лучок","видик","кирха","бодун","дебет","сенцы","смерш","шашни","левый","эрзац","юдоль","ботик","сатин","ветла","стрит","абрек","пенис","задок","зенки","типун","дедок","ксива","кузня","колок","митра","облет","чушка","бурят","выдра","гейша","рысца","ворье","думка","кодак","олифа","летун","нарды","нырок","лабаз","рахит","строп","нищая","враль","дойка","женка","плюха","пуант","цокот","брасс","бутса","кумыс","силен","фанта","хрень","аллюр","гобой","жарка","скетч","целка","битум","сваха","виола","модус","лохмы","сусек","козлы","полип","багет","олива","домна","жинка","игрек","литий","струп","сифон","лычка","кроль","молох","репей","страз","кодла","топаз","садок","унция","редут","хунта","милка","стоик","рулет","битюг","гусак","курья","лапта","окоем","ацтек","кошма","одежа","фагот","ландо","аська","дамка","дебит","зефир","измор","маета","начес","лафет","прайс","тапер","треух","фаянс","эфиоп","камея","феска","ахилл","казан","аргон","цедра","чакра","волан","носка","сплин","щипок","байда","букля","гуляш","тавро","жокей","магма","бубна","есаул","катод","бакен","нерпа","обмер","рондо","судок","фалда","бином","видок","атолл","гросс","помор","русич","вешка","колун","рачок","рыжий","херес","нарта","былье","батут","кофий","рапид","смоль","цыпка","живец","фураж","махра","стейк","валок","кельт","мосол","патио","спрей","шаттл","сноси","кофей","нытик","разор","гопак","смерд","сосец","гусли","ковка","нагар","хмарь","выгул","дедка","зятек","папик","рожки","умора","кащей","крага","крепь","сезам","форте","шифон","эклер","метис","сурик","батог","варна","нумер","лиман","сазан","дядик","косой","налив","бачки","дерен","разик","возок","гомик","дичок","кашпо","пилон","шпрот","валка","лютня","хурма","фреза","бирюк","радон","неуют","тальк","царек","дефис","манка","пырей","схима","хорал","левит","пончо","барка","беляк","вепрь","калаш","сакля","схрон","пугач","клуня","шатен","плева","лизат","запев","милый","фрунт","хамка","бонна","дукат","карла","плебс","совка","чирей","шумер","зыбка","лемех","мосье","пазик","причт","мымра","селен","скаут","тунец","кайло","клико","минер","кагал","мошна","фибра","гумус","калым","кизяк","матюг","мурло","ситро","рохля","радий","юннат","алыча","лобио","лабух","мулат","выдел","висяк","наяда","оникс","праща","сайра","чубук","барий","кутья","чумак","армяк","кинза","анион","омуль","слега","ленок","рядно","лимфа","валек","гурия","зулус","каноэ","манок","нечет","томич","ухарь","фуэте","ябеда","динар","колли","ливер","намаз","опара","офорт","тотем","траст","тяпка","чешка","бахча","бивак","чадра","штрек","фреон","брейк","гжель","дрога","испод","клуша","мохер","перси","регби","сатир","сдоба","сивка","хасид","башли","пемза","скирд","темка","абхаз","дерби","хаджи","шихта","гаусс","халиф","отжим","пифия","жизня","лючок","маман","мясцо","патер","румба","суфле","ямина","видак","свинг","солод","торий","косая","осман","ходжа","ненец","закут","люпин","медок","цезий","эвенк","драже","друид","кибуц","кнехт","педик","перед","хинди","цукат","экзот","локус","мирра","бабай","нолик","рабби","отвес","ворог","ершик","капор","лития","петит","хайло","шафер","варан","винил","конка","парша","хряпа","цевье","целик","штамб","сутра","пизда","ампер","кулеш","абвер","дрофа","лассо","лярва","фарси","щелок","раджа","сиена","станс","туляк","зипун","киста","хазар","панда","пыжик","батыр","матюк","парез","резак","сингл","талес","докер","филер","борок","лоция","хуйня","сойка","скраб","минет","актор","дурка","крафт","макси","пирит","самба","танин","чекан","палаш","салун","верея","эйдос","аспид","фрейм","митек","бутан","генез","фьорд","резус","семит","аргус","бурак","акрил","бьюик","голец","пижма","сайга","серсо","ушица","навал","скейт","кресс","дартс","алтын","дувал","зубик","лошак","рогоз","трейд","рупия","фомка","мураш","рикша","прево","кварк","жатка","суфий","тубус","фиорд","чибис","залом","катет","рында","ханка","харчо","манси","пешня","свами","биток","донка","метиз","рацио","жерех","ирмос","натек","скунс","хорда","вятич","синус","чифир","имаго","алеут","коала","легат","падуб","панна","ряшка","динго","койот","леток","опиат","пурим","топос","филон","шелом","высев","анчар","терец","тимус","драфт","лемма","ровик","марал","дутье","кичка","кодон","мезон","сквош","ашрам","мамба","земец","пузан","эрбий","минея","асана","дерма","фанза","тайка","дайка","улита","валуй","клест","елань","струг","чувал","цигун","тенге","шивер","греча","шибер","омела","дезик","каппа","хабар","митоз","пампа","учхоз","чубик","гусик","сомик","кубло","ессей","сикль","агуша","аксон","карда","пакер","триба","рдест","агенс","аскер","тамга","рокан","нохчи","янтра","шипик","вогул","церка"];
        var target = "";
		var current = "";
		var bestResult = -5;
		var disabled = false;
        var attempt = 1;
        var used = new Object();
        const MAX_ATTEMPTS = 6;

        function newGame() {
            var rndIndex = Math.floor(Math.random() * words.length);
            target = words[rndIndex];
			current = "";
			disabled = false;
            attempt = 1;
			bestResult = -5;
            console.log(target);
			document.getElementById("new").blur();
			document.getElementById("help").blur();
			document.getElementById("help").style.display = "none";
            var cells = document.getElementById("grid").getElementsByTagName("td");
            for (var i = 0; i < cells.length; i++) {
                cells[i].innerText = "";
                cells[i].style.backgroundColor = "#333";
				cells[i].style.color = "#ddd";
            }

            var letters = document.getElementById("letters");
            var letTds = letters.getElementsByTagName("span");
            for (var i = 0; i < letTds.length; i++) {
				if (letTds[i].classList.contains("ctrlBtn")) continue;
                letTds[i].style.backgroundColor = "#333";
                letTds[i].style.color = "#ddd";
            }
            
            for (var i = 1072; i < 1105; i++) {
                used[String.fromCharCode(i)] = -2;
            }
        }

        function checkWord(word) {
            var result = [-1, -1, -1, -1, -1];
            var dict = new Object();
            for (var i = 0; i < target.length; i++) {
                if (!dict[target[i]])
                    dict[target[i]] = [];    
                dict[target[i]].push(i);
            }
            
            for (var i = 0; i < word.length; i++) {
                var c = word[i];
                used[c] = -1;
                if (dict.hasOwnProperty(c)) {
                    var indexes = indexesOf(c, word);
                    if (dict[c].some((element) => indexes.includes(element))) {
                        var foundIndex = dict[c].find((element) => indexes.includes(element));
                        result[foundIndex] = 1;
                        used[c] = 1;
                        dict[c] = dict[c].filter((value, index, arr) => value != foundIndex);
                    } else {
                        for (var j = 0; j < indexes.length; j++) {
							if (result[indexes[j]] < 0) {
								result[indexes[j]] = 0;
								dict[c].shift();
								if (dict[c].length == 0) break;
							}
						}
                        if (used[c] < 1) used[c] = 0;
                    }
                    if (dict[c].length == 0) delete dict[c];
                }
            }
            return result;
        }
        
        function indexesOf(substring, string) {
            var a = [], i = -1;
            while ((i = string.indexOf(substring, i + 1)) >= 0) a.push(i);
            return a;
        }

        function tryWord() {
			if (disabled) return;
            var word = current;
            word = word.toLowerCase();
            current = "";
            if (word.length != 5) {
                alert("Слово должно быть из 5 букв.");
				
				var grid = document.getElementById("grid");
				var tr = grid.getElementsByTagName("tr")[attempt-1];
				var tds = tr.getElementsByTagName("td");
				for (var i = 0; i < tds.length; i++) {
					tds[i].innerText = '';
				}
				
                return;
            }
            if (words.indexOf(word) < 0) {
                alert("Слово должно быть существительным!");
				
				var grid = document.getElementById("grid");
				var tr = grid.getElementsByTagName("tr")[attempt-1];
				var tds = tr.getElementsByTagName("td");
				for (var i = 0; i < tds.length; i++) {
					tds[i].innerText = '';
				}
				
                return;
            }
			
			//console.log(word);

            var result = checkWord(word);
			var sum = result.reduce((a, b) => a + b, 0);
			if (sum > bestResult) bestResult = sum;
            //console.log(result);

            var grid = document.getElementById("grid");
            var tr = grid.getElementsByTagName("tr")[attempt-1];
            var tds = tr.getElementsByTagName("td");
            for (var i = 0; i < tds.length; i++) {
                tds[i].innerText = word[i];
				tds[i].style.color = "#333";
                tds[i].style.backgroundColor = result[i] < 0 ? "#777" : result[i] == 0 ? "#ddd" : "#ff0";
            }

            var letters = document.getElementById("letters");
            var letTds = letters.getElementsByTagName("span");
            for (var i = 0; i < word.length; i++) {
                for (var j = 0; j < letTds.length; j++) {
                    if (letTds[j].innerText == word[i]) {
                        letTds[j].style.backgroundColor = used[word[i]] < -1 ? "#333" : used[word[i]] == -1 ? "#777" : used[word[i]] == 0 ? "#ddd" : "#ff0";
                        letTds[j].style.color = used[word[i]] < 0 ? "#ddd" : "#333";
                        break;
                    }
                }
            }

            setTimeout(function(){
                if (word == target) {
                    var rndIndex = Math.floor(Math.random() * congrats.length);
                    alert ("ПОБЕДА!!!\r\n" + congrats[rndIndex]);
					disabled = true;
                    return;
                }

                attempt++;
                if (attempt > MAX_ATTEMPTS) {
                    alert("Вы проиграли. Было загадано слово '" + target + "'");
					disabled = true;
                }
				
				<!-- if (attempt == MAX_ATTEMPTS && bestResult < 0) { -->
					<!-- document.getElementById("help").style.display = "inherit"; -->
				<!-- } -->
            }, 0);
        }

		document.addEventListener("keydown", function(e) {
			if (disabled) return;
			
			if (e.key == "Enter") {
                tryWord();
				return;
            }
			var word = current;
			if (e.key == "Backspace") word = word.substring(0, word.length - 1);
			else if (e.key.length > 1) return;
			else word += e.key;
			current = word;
			var grid = document.getElementById("grid");
			var tr = grid.getElementsByTagName("tr")[attempt - 1];
			tds = tr.getElementsByTagName("td");
			for (var j = 0; j < tds.length; j++) {
				if (word[j]) tds[j].innerText = word[j];
				else tds[j].innerText = '';
			}
		});

        document.addEventListener("DOMContentLoaded", function(event) {
            newGame();
			
			var spans = document.getElementById("letters").getElementsByTagName("span")
			for (var i = 0; i < spans.length; i++) {
				spans[i].addEventListener("click", function() {
					if (disabled) return;
					if (this.id == "send") return;
					var c = this.innerText;
					var word = current;
					if (this.id == "backspace") word = word.substring(0, word.length - 1);
					else word += c;
					current = word;
					var grid = document.getElementById("grid");
					var tr = grid.getElementsByTagName("tr")[attempt-1];
					var tds = tr.getElementsByTagName("td");
					for (var j = 0; j < tds.length; j++) {
						if (word[j]) tds[j].innerText = word[j];
						else tds[j].innerText = '';
					}
				});
			}
			
        });
    </script>
    <style type="text/css">
        body {
            text-align: center;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #333;
            color: #ddd;
        }
        table {
            height: 300px;
            margin: 10px auto;
        }
        table tr td {
            border: 1px solid #999;
            border-radius: 3px;
            width: 60px;
            height: 60px;
            font-size: 40px;
            text-transform: capitalize;
            background-color: #333;
            color: #ddd;
        }
        #letters {
            height: auto;
        }
        #letters span {
            font-size: 18px;
            width: 28px;
            height: 42px;
			line-height: 42px;
            color: #ddd;
            text-transform: none;
			display: inline-block;
			border: 1px solid #999;
			border-radius: 3px;
			margin: 1px;
        }
		#letters span.ctrlBtn {
			width: 42px;
			background-color: #ddd;
			color: #333;
			margin: 1px 6px;
		}
		.wrapper {
			position: relative;
		}
		.title {
			font-size: 2em;
			font-weight: bold;
			height: 2em;
			display: block;
			line-height: 2em;
		}
		.menu {
		    position: absolute;
			top: 16px;
			right: 10px;
			width: 120px;
			bottom: 10px;
		}
		.menu .btn {
			width: 48px;
			line-height: 100%;
			height: 100%;
			color: #ddd;
			background: #333;
			border: none;
			font-weight: bold;
			font-size: 30px;
			float: right;
        }
    </style>
    <body>
        <div class="wrapper">
			<span class="title">Угадай слово</span>
			<div class="menu">
				<button id="new" class="btn" onclick="if (confirm('Начать новую игру?')) { newGame(); }">+</button>
				<button id="help" class="btn">?</button>
			</div>
		</div>
        <hr />
        <table id="grid">
            <tr>
                <td></td><td></td><td></td><td></td><td></td>
            </tr>
            <tr>
                <td></td><td></td><td></td><td></td><td></td>
            </tr>
            <tr>
                <td></td><td></td><td></td><td></td><td></td>
            </tr>
            <tr>
                <td></td><td></td><td></td><td></td><td></td>
            </tr>
            <tr>
                <td></td><td></td><td></td><td></td><td></td>
            </tr>
            <tr>
                <td></td><td></td><td></td><td></td><td></td>
            </tr>
        </table>
        <hr />
        <div id="letters">
            <div>
                <span>й</span><span>ц</span><span>у</span><span>к</span><span>е</span><span>н</span><span>г</span><span>ш</span><span>щ</span><span>з</span><span>х</span><span>ъ</span>
            </div>
            <div>
                <span>ф</span><span>ы</span><span>в</span><span>а</span><span>п</span><span>р</span><span>о</span><span>л</span><span>д</span><span>ж</span><span>э</span>
            </div>
            <div>
                <span class="ctrlBtn" id="backspace">&#8592;</span><span>я</span><span>ч</span><span>с</span><span>м</span><span>и</span><span>т</span><span>ь</span><span>б</span><span>ю</span><span id="send" class="ctrlBtn" onclick="tryWord()">&#9166;</span>
            </div>
        </div>
    </body>
</html>
